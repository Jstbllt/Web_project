<!-- views/computers_list_admin.ejs -->
<%- include("partial_headers_admin.ejs"); %>

<section class="p-3">
<h1>List of Computers</h1>
<% if (flashMessage) { %>
    <p style='color:red'><%= flashMessage %></p>
<% } %>

<p><a href='/computers/edit/0'>Add a new computer</a></p>

<table class="table table-striped table-bordered table-hover">
    <tr>
        <td>ID</td>
        <td>Brand</td>
        <td>Model</td>
        <td>CPU</td>
        <td>GPU</td>
        <td>Price</td>
        <td>Stock</td>
        <td>Show</td>
        <td>Edit</td>
        <td>Delete</td>
    </tr>

    <% for (var c of computers) { %>
        <tr>
            <td><%= c.computer_id %></td>
            <td><%= c.brand_name %></td>
            <td><%= c.computer_model %></td>
            <td>
                <% for (var b of brands) { %>
                    <% if(c.cpu_brand==b.brand_id) { %>
                        <%= b.brand_name %>
                    <% } %>
                <% } %>
                <%= c.cpu_model %></td>
            <td>
                <% for (var b of brands) { %>
                    <% if(c.gpu_brand==b.brand_id) { %>
                        <%= b.brand_name %>
                    <% } %>
                <% } %>
                <%= c.gpu_model %></td>
            <td><%= c.computer_price %></td>
            <td><%= c.computer_stocks %></td>
            <td><a href='/computers/show/admin/<%= c.computer_id %>'>Show</a></td>
            <td><a href='/computers/edit/<%= c.computer_id %>'>Edit</a></td>
            <td>
                <% if(c.computer_id>10){ %>
                    <button onclick="alert('Computer deleted')"> <a href="/computers/del/<%= c.computer_id %>">Delete</a></button>
                <% } %>
            </td>
        </tr>
    <% } %>
</table>
</section>
<%- include("partial_footer.ejs"); %>